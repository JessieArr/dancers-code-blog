<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.5.1"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Techniques and Advice for Logging in .NET" /><meta name="author" content="Shawn" /><meta property="og:locale" content="en_US" /><meta name="description" content="When setting out to design maintainable software, one of the most critical things to bear in mind is creating feedback loops that allow you to make code decisions based on the application’s actual use and performance under real-world circumstances. A crucial aspect of this is that your application needs to be able to tell you when something is wrong." /><meta property="og:description" content="When setting out to design maintainable software, one of the most critical things to bear in mind is creating feedback loops that allow you to make code decisions based on the application’s actual use and performance under real-world circumstances. A crucial aspect of this is that your application needs to be able to tell you when something is wrong." /><link rel="canonical" href="https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/" /><meta property="og:url" content="https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/" /><meta property="og:site_name" content="Dancer’s Code" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-01-17T00:00:00-06:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Techniques and Advice for Logging in .NET" /><meta name="twitter:site" content="@TheDancersCode" /><meta name="twitter:creator" content="@Shawn" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/"},"description":"When setting out to design maintainable software, one of the most critical things to bear in mind is creating feedback loops that allow you to make code decisions based on the application’s actual use and performance under real-world circumstances. A crucial aspect of this is that your application needs to be able to tell you when something is wrong.","url":"https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/","author":{"@type":"Person","name":"Shawn"},"headline":"Techniques and Advice for Logging in .NET","dateModified":"2019-01-17T00:00:00-06:00","datePublished":"2019-01-17T00:00:00-06:00","@context":"https://schema.org"}</script><title>Techniques and Advice for Logging in .NET | Dancer's Code</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/dancers-code-logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Dancer's Code</a></div><div class="site-subtitle font-italic">Code should be elegant, too.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/JessieArr" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/TheDancersCode" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Techniques and Advice for Logging in .NET</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Techniques and Advice for Logging in .NET</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Jan 17, 2019, 12:00 AM -0600" > Jan 17, 2019 <i class="unloaded">2019-01-17T00:00:00-06:00</i> </span> by <span class="author"> Shawn </span></div><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 30, 2020, 1:25 PM -0600" > Nov 30, 2020 <i class="unloaded">2020-11-30T13:25:10-06:00</i> </span></div></div><div class="post-content"><p>When setting out to design maintainable software, one of the most critical things to bear in mind is creating feedback loops that allow you to make code decisions based on the application’s actual use and performance under real-world circumstances. A crucial aspect of this is that your application <strong>needs to be able to tell you when something is wrong.</strong></p><p>One of the main ways to achieve this is by application logging. There are many forms of logging, but in the scope of this article we will discuss a few categories of logging:</p><ul><li>Diagnostic Logging<li>Performance Logging<li>User Behavior Logging<li>Code Behavior Logging<li>Audit Logging</ul><h2 id="diagnostic-logging">Diagnostic Logging</h2><p>Diagnostic logging is, broadly logs that help you identify and troubleshoot failure scenarios in your application. Below we will discuss a variety of ways to employ diagnostic logging to help reduce your time spent tracking down tricky bugs to help you spend more time on the fun parts of programming.</p><h3 id="catchall-exception-logging">Catchall Exception Logging</h3><p>This is the most basic form of exception logging, but its great benefit is that if any code is written in your application that does not correctly handle exceptions, you are guaranteed to have a log about it! Depending on the structure of your application this may take many forms.</p><p>In ASP.NET applications, you can <a href="https://docs.microsoft.com/en-us/aspnet/web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/aspnet-error-handling#application-level-error-handling">define a method in your Global.asax file</a> to handle all errors that occur during processing of an HTTP request:</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">void</span> <span class="nf">Application_Error</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</pre></table></code></div></div><p>In an application using the Owin pipeline, you can <a href="https://stackoverflow.com/a/34493054/1504529">write a simple middleware which wraps all subsequent middleware executions in a try/catch</a>, something like this:</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">((</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="k">try</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="nf">next</span><span class="p">();</span>
  <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="c1">// Log the exception here.</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>In .NET desktop applications, you can use the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.appdomain?view=netframework-4.7.2">AppDomain</a> class’ UnhandledException and FirstChanceException lifecycle events to log either all exceptions or only unhandled exceptions, whichever you prefer <a href="https://github.com/dotnet/corefx/pull/11275">(note that in recent versions of .NET Core console apps this works as well!)</a>:</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">AppDomain</span><span class="p">.</span><span class="n">CurrentDomain</span><span class="p">.</span><span class="n">UnhandledException</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="kt">var</span> <span class="n">ex</span> <span class="p">=</span> <span class="n">args</span><span class="p">.</span><span class="n">ExceptionObject</span><span class="p">;</span>
  <span class="c1">// TODO: test the exception object type and log it</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="downstream-dependency-error-logging">Downstream Dependency Error Logging</h3><p>Any time your application interacts with a downstream dependency, such as a database or another API, you should wrap the interaction in a try/catch and log any exceptions that get thrown. This is incredibly useful for determining when failures in your application are caused by bugs or outages in other people’s code!</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">try</span>
<span class="p">{</span>
  <span class="n">myDownstreamDependency</span><span class="p">.</span><span class="nf">SendRequest</span><span class="p">()</span>
<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Log the exception here.</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Note that when doing this, you should also include as many specifics about what you were doing in your log. Things like: which API call you were making, what URL you were accessing, what arguments you passed in, which user was taking the action, etc.</p><h3 id="soft-failure-logging">Soft Failure Logging</h3><p>As we are adding logging to our application, it is important to remember that not all failures in our code result in exceptions being thrown. There are other code failures which can result in bad/missing data without ever throwing an exception. One good example of this is when you know an operation should always return a non-empty list, but the resulting list is empty. While this may not cause an exception that causes your application to be unusable, it is still a logical error which will have some known or unknown impact on your users and should be logged.</p><h2 id="performance-logging">Performance Logging</h2><p>Another thing we want to know about in our application is when something causes it to run slowly. In many cases, problems or changes in our code can cause the code to begin running more slowly, which from the user’s perspective is a bug!</p><p>So any operation which a user initiates which could cause a bad user experience if it were to take too long should be wrapped in some form of performance logging. A great tool for this is <a href="https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch?view=netframework-4.7.2">the .NET Stopwatch class</a>.</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">stopwatch</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Stopwatch</span><span class="p">();</span>
<span class="n">stopwatch</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
<span class="c1">// Do something</span>
<span class="n">stopwatch</span><span class="p">.</span><span class="nf">Stop</span><span class="p">();</span>
</pre></table></code></div></div><p>After calling the Stop method on our Stopwatch, then we can check its ElapsedMilliseconds or ElapsedTicks properties to check how much time has passed, and include this information in our logs.</p><h4 id="http-request-performance-logging">HTTP Request Performance Logging</h4><p>Logging the performance of all HTTP Requests is a great way to get a high-level overview of the performance of a web application. Depending on your architecture there are a few ways of doing this, but in ASP.NET applications with a Global.asax file, you can define methods to handle the ASP.NET lifecycle events for the beginning and end of handling a request:</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="n">Stopwatch</span> <span class="n">_stopwatch</span><span class="p">;</span>
<span class="k">protected</span> <span class="k">void</span> <span class="nf">Application_BeginRequest</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">_stopwatch</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Stopwatch</span><span class="p">();</span>
  <span class="n">_stopwatch</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">protected</span> <span class="k">void</span> <span class="nf">Application_EndRequest</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">_stopwatch</span><span class="p">.</span><span class="nf">Stop</span><span class="p">();</span>
  <span class="c1">// TODO: log the performance here</span>
<span class="p">}</span>
</pre></table></code></div></div><p>In an Owin application (such as ASP.NET Core apps), it’s even easier, you can just define a middleware near the beginning of your Owin pipeline that calls the rest of your middleware, and log the performance there:</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">((</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="kt">var</span> <span class="n">stopwatch</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Stopwatch</span><span class="p">();</span>
  <span class="n">stopwatch</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>
  <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="nf">next</span><span class="p">();</span> <span class="c1">// We run all of our other middleware</span>
  <span class="n">stopwatch</span><span class="p">.</span><span class="nf">Stop</span><span class="p">();</span>
  <span class="c1">// Log the performance here.</span>
  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="downstream-dependency-performance-logging">Downstream Dependency Performance Logging</h3><p>Once again it is very important to keep track of your downstream dependencies. Not all problems in your application originate in your code, so being able to tell when slowness in your application originates in an API or database you depend on is very important to point your troubleshooting in the right direction (and point blame in the right direction, if you have the misfortune to work for an organization which does not have <a href="https://codeascraft.com/2012/05/22/blameless-postmortems/">blameless postmortems</a>…)</p><p>As with our downstream dependency error logging, we should capture as many specifics as possible about our API call/DB query in order to facilitate rapid troubleshooting of the problem.</p><h2 id="user-behavior-logging">User Behavior Logging</h2><p>It can be very useful to know how your users are actually using your application. The scope of this extends beyond just troubleshooting bugs and problems, to informing your technical priorities and even feature grooming. Below are some suggestions about useful types of user actions to log:</p><h3 id="log-inout">Log In/Out</h3><p>Whenever a user begins or ends using your application, you should log that behavior. This provides very insightful usage statistics. Additionally, when a user attempts to log in, you should record whether their login attempt succeeded or failed - this is useful for detecting brute force and DDoS attacks, or even informing your product decisions around things like password recovery or failed password lockout thresholds/durations.</p><h3 id="new-features">New Features</h3><p>When you release a new feature, it can be very useful to log how many users are using the feature and how they are using it. This is important feedback for an Agile development process - you can’t always talk to your users about how they are using your application, but you can log what they do! Combining this with error and performance logs can give you a lot of insight into whether users are having a positive experience with a new feature.</p><h3 id="high-impact-features">High-Impact Features</h3><p>If a particular feature in your application is known to have a significant performance impact, it can be very good to log the frequency with which users use that feature. This might be operations such as provisioning a new virtual machine, or clearing all of the cached data for their customer.</p><h2 id="code-behavior-logging">Code Behavior Logging</h2><p>Just as User Behavior Logging is useful for finding out what your users are doing, Code Behavior Logging is useful for finding out what your code is doing.</p><h3 id="application-lifecycle">Application Lifecycle</h3><p>Logging key events in your application lifecycle can be really useful for diagnosing startup problems and crashes. In particular, one of the first things you do when your app starts is create a log with the current machine name! This not only gives you a history of when your app was started or restarted, but also lets you make sure that your logging is working!</p><p>In a .NET Core application, the easiest place to do this is right in the beginning of the Main method:</p><div class="language-c# highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// Write your log here!</span>
  <span class="nf">CreateWebHostBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">).</span><span class="nf">Build</span><span class="p">().</span><span class="nf">Run</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p>For older .NET Framework WebApps (MVC/WebForms), you will instead need to do this during the Application_Start HttpApplication lifecycle event in your Global.asax file:</p><p><code class="language-plaintext highlighter-rouge">c# protected void Application_Start() { // Write your log here! // Usually startup things like dependency injection etc. go here. } </code> </p><p>For WPF desktop applications, the App.xaml.cs constructor or the MainWindow’s constructor are good places.</p><p>Other useful lifecycle events to capture are: application shutdown, and the execution of any recurring background worker threads which may run in the background during normal operations.</p><h3 id="branch-execution">Branch Execution</h3><p>This is particularly useful in legacy codebases. Sometimes you will find yourself staring at some old code and wondering “does this code even ever get hit any more?” Branch execution logs can answer this question for you - simply add a log statement in that code branch and release it to users. It won’t take long before you’ll have an answer to that question.</p><h3 id="data-logging">Data Logging</h3><p>When it is not clear what the actual data in your application looks like at runtime, it can be useful to log the data itself or key attributes about it. For instance, if you are doing lots of string operations in your application, it might be useful to log the length of those strings so that you know how important optimizing your string operations is. If the strings are always small, the optimization work may not be valuable enough to do. But for long strings it might warrant a higher priority.</p><h2 id="audit-logging">Audit Logging</h2><p>Audit Logging is designed to give you a record of sensitive user behaviors. There are many concerns involved in audit logging - audit logs are often customer-facing and can sometimes play a role in compliance and legal matters. So it’s really important to get these ones right.</p><h3 id="user-facing-datachanges">User-Facing Data Changes</h3><p>Any time a user modifies data that users have access to, and that change is persisted anywhere (such as a database or filesystem) you should generate an audit log for this behavior. Be sure to log not only the data that was modified, but the user doing it, and if possible, some details about what was changed.</p><h3 id="viewing-sensitive-data">Viewing Sensitive Data</h3><p>While we are normally worried about auditing when users <em>change</em> data, some data is so sensitive that even viewing it warrants an audit log entry. What data falls into this category will vary depending on your application, but good candidates are financial information, or when one user views personal data about other users.</p><h2 id="conclusion">Conclusion</h2><p>I hope that this blog has given you some good heuristics to think about when adding logging to your application. Logs are an absolutely amazing tool when it comes time to troubleshoot a bug, diagnose an outage, or provide customers with really specific and useful data about a data loss scenario. When things go wrong (and they will) logs are what helps you put on your Sherlock Holmes hat and make sure it doesn’t go wrong twice!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/logging/" class="post-tag no-text-decoration" >Logging</a> <a href="/tags/dotnet/" class="post-tag no-text-decoration" >dotnet</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Techniques and Advice for Logging in .NET - Dancer's Code&url=https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Techniques and Advice for Logging in .NET - Dancer's Code&u=https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Techniques and Advice for Logging in .NET - Dancer's Code&url=https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/test-automation-strategy/">Test Automation Strategy</a><li><a href="/posts/new-blog-who-dis/">New Blog Who Dis??</a><li><a href="/posts/javascript-is-the-right-flavor-of-bad/">Javascript is the Right Flavor of Bad</a><li><a href="/posts/commonly-misused-programming-terms/">Commonly Misused Programming Terms</a><li><a href="/posts/thoughts-on-gitkraken/">Thoughts on GitKraken</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/automation/">Automation</a> <a class="post-tag" href="/tags/testing/">Testing</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/clean-code/">Clean Code</a> <a class="post-tag" href="/tags/dj/">DJ</a> <a class="post-tag" href="/tags/education/">Education</a> <a class="post-tag" href="/tags/logging/">Logging</a> <a class="post-tag" href="/tags/logitech/">Logitech</a> <a class="post-tag" href="/tags/tech-debt/">Tech Debt</a> <a class="post-tag" href="/tags/west-coast-swing/">West Coast Swing</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/what-to-log-in-net/"><div class="card-body"> <span class="timeago small" > Jan 29, 2019 <i class="unloaded">2019-01-29T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>What to Log in .NET</h3><div class="text-muted small"><p> In my previous post, I discussed a lot of the when of logging - when to log things in your application. So in this post I’d like to talk a little bit about what to log. Having lots of logs is cert...</p></div></div></a></div><div class="card"> <a href="/posts/tackling-tech-debt/"><div class="card-body"> <span class="timeago small" > May 19, 2020 <i class="unloaded">2020-05-19T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tackling Tech Debt</h3><div class="text-muted small"><p> “Technical Debt” can sometimes be a slippery term in the software industry. If you talk about it long enough, it usually becomes apparent that the participants in the conversation have very differe...</p></div></div></a></div><div class="card"> <a href="/posts/thoughts-on-gitkraken/"><div class="card-body"> <span class="timeago small" > Jul 19, 2018 <i class="unloaded">2018-07-19T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Thoughts on GitKraken</h3><div class="text-muted small"><p> So I recently saw the 1.0 release announcement of Axosoft’s GitKraken. Since I’ve recently been having lots of issues with Atlassian’s SourceTree for Windows, and have never particularly cared for ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/the-four-phases-of-dance-djs/" class="btn btn-outline-primary"><p>The Four Phases of Dance DJs</p></a> <a href="/posts/what-to-log-in-net/" class="btn btn-outline-primary"><p>What to Log in .NET</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//dancerscode.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://dancerscode.com/posts/techniques-and-advice-for-logging-in-net/'; this.page.identifier = '/posts/techniques-and-advice-for-logging-in-net/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/TheDancersCode">Shawn</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/automation/">Automation</a> <a class="post-tag" href="/tags/testing/">Testing</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/clean-code/">Clean Code</a> <a class="post-tag" href="/tags/dj/">DJ</a> <a class="post-tag" href="/tags/education/">Education</a> <a class="post-tag" href="/tags/logging/">Logging</a> <a class="post-tag" href="/tags/logitech/">Logitech</a> <a class="post-tag" href="/tags/tech-debt/">Tech Debt</a> <a class="post-tag" href="/tags/west-coast-swing/">West Coast Swing</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dancerscode.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49467963-2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-49467963-2'); </script>
