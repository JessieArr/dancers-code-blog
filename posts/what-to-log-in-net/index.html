<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.5.1"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="What to Log in .NET" /><meta name="author" content="Shawn" /><meta property="og:locale" content="en_US" /><meta name="description" content="In my previous post, I discussed a lot of the when of logging - when to log things in your application. So in this post I’d like to talk a little bit about what to log." /><meta property="og:description" content="In my previous post, I discussed a lot of the when of logging - when to log things in your application. So in this post I’d like to talk a little bit about what to log." /><link rel="canonical" href="https://dancerscode.com/posts/what-to-log-in-net/" /><meta property="og:url" content="https://dancerscode.com/posts/what-to-log-in-net/" /><meta property="og:site_name" content="Dancer’s Code" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-01-29T00:00:00-06:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="What to Log in .NET" /><meta name="twitter:site" content="@TheDancersCode" /><meta name="twitter:creator" content="@Shawn" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://dancerscode.com/posts/what-to-log-in-net/"},"description":"In my previous post, I discussed a lot of the when of logging - when to log things in your application. So in this post I’d like to talk a little bit about what to log.","url":"https://dancerscode.com/posts/what-to-log-in-net/","author":{"@type":"Person","name":"Shawn"},"headline":"What to Log in .NET","dateModified":"2019-01-29T00:00:00-06:00","datePublished":"2019-01-29T00:00:00-06:00","@context":"https://schema.org"}</script><title>What to Log in .NET | Dancer's Code</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/dancers-code-logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Dancer's Code</a></div><div class="site-subtitle font-italic">Code should be elegant, too.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/JessieArr" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/TheDancersCode" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>What to Log in .NET</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>What to Log in .NET</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 29, 2019, 12:00 AM -0600" > Jan 29, 2019 <i class="unloaded">2019-01-29T00:00:00-06:00</i> </span> by <span class="author"> Shawn </span></div><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, Dec 1, 2020, 1:35 AM -0600" > Dec 1, 2020 <i class="unloaded">2020-12-01T01:35:55-06:00</i> </span></div></div><div class="post-content"><p>In my <a href="https://dancerscode.com/2019/01/17/techniques-and-advice-for-logging-in-net/">previous post</a>, I discussed a lot of the <em>when</em> of logging - when to log things in your application. So in this post I’d like to talk a little bit about <em>what</em> to log.</p><p>Having lots of logs is certainly better than having none, but if the logs don’t capture important information that allow you to make decisions about your application design, then they are not as valuable as they could be. So in this post I will discuss certain key pieces of information which can greatly enrich your logs:</p><ul><li><a href="#web-request-data">Web Request Data</a><li><a href="#user-data">User Data</a><li><a href="#caller-data">Caller Data</a><li><a href="#environment-data">Environment Data</a><li><a href="#error-data">Error Data</a></ul><h2 id="web-request-data">Web Request Data</h2><p>In a web application, it can be hugely useful to log certain information about the incoming request. The first things we want to take a look at are what was requested. See below for WebForms/MVC code snippets:</p><h4 id="protocol">Protocol</h4><p>If your web server serves both HTTP and HTTPS requests, you should log the protocol being used for the request. (<a href="https://www.troyhunt.com/https-is-easy/">You do use HTTPS, right?</a>)</p><h4 id="hostname">Hostname</h4><p>By logging the hostname, we can see the actual domain that was requested, including ports (if the port was specified) and the subdomain.</p><h4 id="path">Path</h4><p>This represents the actual request path - the part after the hostname and before the query string. In MVC apps, this is used for routing to the appropriate controller/view, and in WebForms apps this will be the path to the .aspx page which is rendered.</p><h4 id="query-string">Query String</h4><p>Because query strings are used for passing in important information, the request information is not really completed without it. <strong>NOTE: if you are passing sensitive data via query strings, be sure not to log them!</strong> Additionally, see <a href="https://security.stackexchange.com/a/29600/159498">this StackExchange post</a> for reasons why you should not do this.</p><h4 id="ip-address">IP Address</h4><p>This one is a common pitfall, but it’s good information to have no matter what. Remember that the IP address is the request of the machine which sent the request to you, and not unique to a user. For instance, if multiple people in the same home visit your website on different computers, you will most likely see the same IP address for all of them.</p><p>To add to the complexity, if a proxy, CDN, or load balancer forwarded the request to you on behalf of a user, then this IP address may not be the user’s at all. But take heart: well-behaved proxies will usually include the original IP in a header which you can retrieve. A common way of doing this is with the <a href="https://www.loadbalancer.org/blog/iis-and-x-forwarded-for-header/">X-Forwarded-For</a> header. Some other services such as Cloudflare and Akamai instead use the <a href="https://support.cloudflare.com/hc/en-us/articles/206776727-What-is-True-Client-IP-">True-Client-IP</a> header. Depending on your network infrastructure will determine where the actual user’s IP address will be stored in the request.</p><h4 id="user-agent">User Agent</h4><p>The User Agent is another important header to capture - it indicates the web browser and operating system that the user is using. This can be very useful when attempting to diagnose bugs that only occur on certain browsers, and can also give insight into the technologies in use by your users. At work we were shocked to find that an extremely small percentage of our users were viewing our website on Android TVs!</p><h4 id="code-example-webforms-and-net-framework-mvc">Code Example: WebForms and .NET Framework MVC</h4><p>Below is an example of how to fetch all of these values in an MVC or WebForms app. In your Controller/Page, there is a Request property defined which contains lots of information about the request:</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">hostname</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">UserHostName</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">path</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Path</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">queryString</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">QueryString</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">ip</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">UserHostAddress</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">forwardedFor</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"X-Forwarded-For"</span><span class="p">];</span>
<span class="kt">var</span> <span class="n">trueClientIp</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"True-Client-IP"</span><span class="p">];</span>
<span class="kt">var</span> <span class="n">userAgent</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">UserAgent</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="code-example-net-core-mvc">Code Example: .NET Core MVC</h4><p>The implementation of the MVC Controller’s Request property’s class is a little different in .NET Core, but the same principles still apply here:</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">hostname</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Host</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">path</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Path</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">queryString</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">QueryString</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">ip</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">HttpContext</span><span class="p">.</span><span class="n">Connection</span><span class="p">.</span><span class="n">RemoteIpAddress</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">forwardedFor</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"X-Forwarded-For"</span><span class="p">];</span>
<span class="kt">var</span> <span class="n">trueClientIp</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"True-Client-IP"</span><span class="p">];</span>
<span class="kt">var</span> <span class="n">userAgent</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"User-Agent"</span><span class="p">];</span>
</pre></table></code></div></div><h4 id="code-example-aspnet-core-owin">Code Example: ASP.NET Core Owin</h4><p>If you need to retrieve the request data from the Owin context during the execution of your Owin pipeline (this is a great place for performance and error logging!) then it is very similar to the above example, except that we will get the request object from the Owin context instead of a property on our Controller:</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="kt">var</span> <span class="n">hostname</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Host</span><span class="p">;</span>
  <span class="kt">var</span> <span class="n">path</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Path</span><span class="p">;</span>
  <span class="kt">var</span> <span class="n">queryString</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">QueryString</span><span class="p">;</span>
  <span class="kt">var</span> <span class="n">ip</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">HttpContext</span><span class="p">.</span><span class="n">Connection</span><span class="p">.</span><span class="n">RemoteIpAddress</span><span class="p">;</span>
  <span class="kt">var</span> <span class="n">forwardedFor</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"X-Forwarded-For"</span><span class="p">];</span>
  <span class="kt">var</span> <span class="n">trueClientIp</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"True-Client-IP"</span><span class="p">];</span>
  <span class="kt">var</span> <span class="n">userAgent</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="s">"User-Agent"</span><span class="p">];</span>
  <span class="k">return</span> <span class="k">await</span> <span class="nf">next</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="user-data">User Data</h2><p>It is very useful to have information about the user themselves when looking at logs. This lets you know who caused the log, but can also be a useful aid when troubleshooting bugs, since you can create a test account with similar data. It is also very useful for audit logging, if you need to answer a question about which user took an action and when.</p><p>To get data about the current user, you will need access to the user’s <a href="https://docs.microsoft.com/en-us/dotnet/api/system.security.principal.iprincipal?view=netframework-4.7.2">Principal</a>. How you get access to this will vary by environment:</p><ul><li>In WebForms or .NET Framework MVC apps, the Page/Controller has a User property which will contain the current user’s Principal.<li>In most .NET Framework apps, you can also access the current user’s Principal using <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.thread.currentprincipal?view=netframework-4.7.2">Thread.CurrentPrincipal</a>.<li>In .NET Core apps, <a href="https://davidpine.net/blog/principal-architecture-changes/">Thread.Current principal is not available</a>, and you should instead use .NET Core’s dependency injection and the IHttpContextAccessor interface.<li>In the Owin pipeline, you can access the User property of the HttpContext, which contains a ClaimsPrincipal.</ul><p>Once you have access to the user’s principal, you can use it to check whether they are properly authenticated, and get their name:</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">userPrincipal</span> <span class="p">=</span> <span class="n">Thread</span><span class="p">.</span><span class="n">CurrentPrincipal</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">isAuthenticated</span> <span class="p">=</span> <span class="n">userPrincipal</span><span class="p">.</span><span class="n">Identity</span><span class="p">.</span><span class="n">IsAuthenticated</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">userName</span> <span class="p">=</span> <span class="n">userPrincipal</span><span class="p">.</span><span class="n">Identity</span><span class="p">.</span><span class="n">Name</span><span class="p">;</span>
</pre></table></code></div></div><p>Additionally, a very common implementation of the IPrincipal interface is the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.security.claims.claimsprincipal?view=netframework-4.7.2">ClaimsPrincipal</a>, which can contain all sorts of information about the current user - common and useful claims to look at are the user’s roles, email, and any application-specific claims you might generate during user login, such as a user ID or customer ID.<a href="#"></a></p><h2 id="caller-data">Caller Data</h2><p>A very useful diagnostic tool that I’ve come to love is: including the file and method which actually wrote the log. While you can rely on stack traces in the case of exception logging, it can also be useful to find out where other types of logs, such as user behavior logs are being generated, in order to put them into context.</p><p>C# exposes a couple of really handy attributes for this purpose which can be applied to your method parameters. The first is the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.callermembernameattribute?view=netframework-4.7.2">CallerMemberNameAttribute</a> which contains the method name of the method which called yours. The second is the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.callerfilepathattribute?view=netframework-4.7.2">CallerFilePathAttribute</a>, which contains the path on disk to the source file in which the calling class is defined (note that the path will usually correspond to the machine which compiled the code and not necessarily the one on which it is running!)</p><p>To use these attributes, you simply need to add them to nullable string parameters on your method which does the logging:</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">private</span> <span class="k">void</span> <span class="nf">CallerExample</span><span class="p">([</span><span class="n">CallerMemberName</span><span class="p">]</span> <span class="kt">string</span> <span class="n">memberName</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
    <span class="p">[</span><span class="n">CallerFilePath</span><span class="p">]</span> <span class="kt">string</span> <span class="n">filePath</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">var</span> <span class="n">fileName</span> <span class="p">=</span> <span class="n">filePath</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">filePath</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="n">Path</span><span class="p">.</span><span class="n">DirectorySeparatorChar</span><span class="p">)</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Bear in mind that the values at runtime will be the calling method - even if you use some private helper methods to do logging, in which case the method and file name may always point to your logging class. In this case, simply add the parameters with the Caller attributes to your public method and pass the values in to your private method - the values you pass in as arguments will be used instead of the actual caller values.<a href="#"></a></p><h2 id="environment-data">Environment Data</h2><p>Capturing information about the environment your code is running in can be very useful when diagnosing environmental issues, such as when an error only occurs on one server for some reason.</p><p>Some of the most useful pieces of information here are:</p><ul><li>Machine Name (useful to know if something is only happening on one machine.)<li>Thread ID (useful for diagnosing race conditions.)<li>UserAccount under which the application is running (useful for diagnosing permissions issues.)</ul><p>These values can be accessed on the Environment static class:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>var machineName = Environment.MachineName;
var threadId = Environment.CurrentManagedThreadId;
var userAccount = Environment.UserName;
</pre></table></code></div></div><h2 id="error-data">Error Data</h2><p>This one is fairly easy, but is nonetheless very important. Whenever your application detects an error or exception, you should log the Exception message and stack trace for diagnostics.</p><p>Many programmers simply log the exception itself and think that they’re done, but remember - your exception logs will be the first place you look when diagnosing a bug! Think ahead and put yourself in your shoes and consider what additional information might help you get to the bottom of a tricky bug, and log it now! Good candidates for this are things like method parameters, collection sizes, or user roles if an authorization exception is possible.</p><h2 id="conclusion">Conclusion</h2><p>I hope that this has given you some useful ideas and code examples to really up your logging game. As you enrich your logging story by adding additional data to logs, and a more thorough system of logging to your application, you will find yourself learning about all sorts of things that happen during your program’s execution that you may never have discovered through normal testing.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/logging/" class="post-tag no-text-decoration" >Logging</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=What to Log in .NET - Dancer's Code&url=https://dancerscode.com/posts/what-to-log-in-net/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=What to Log in .NET - Dancer's Code&u=https://dancerscode.com/posts/what-to-log-in-net/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=What to Log in .NET - Dancer's Code&url=https://dancerscode.com/posts/what-to-log-in-net/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/test-automation-strategy/">Test Automation Strategy</a><li><a href="/posts/new-blog-who-dis/">New Blog Who Dis??</a><li><a href="/posts/javascript-is-the-right-flavor-of-bad/">Javascript is the Right Flavor of Bad</a><li><a href="/posts/commonly-misused-programming-terms/">Commonly Misused Programming Terms</a><li><a href="/posts/thoughts-on-gitkraken/">Thoughts on GitKraken</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/automation/">Automation</a> <a class="post-tag" href="/tags/testing/">Testing</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/clean-code/">Clean Code</a> <a class="post-tag" href="/tags/dj/">DJ</a> <a class="post-tag" href="/tags/education/">Education</a> <a class="post-tag" href="/tags/logging/">Logging</a> <a class="post-tag" href="/tags/logitech/">Logitech</a> <a class="post-tag" href="/tags/tech-debt/">Tech Debt</a> <a class="post-tag" href="/tags/west-coast-swing/">West Coast Swing</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/techniques-and-advice-for-logging-in-net/"><div class="card-body"> <span class="timeago small" > Jan 17, 2019 <i class="unloaded">2019-01-17T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Techniques and Advice for Logging in .NET</h3><div class="text-muted small"><p> When setting out to design maintainable software, one of the most critical things to bear in mind is creating feedback loops that allow you to make code decisions based on the application’s actual ...</p></div></div></a></div><div class="card"> <a href="/posts/tackling-tech-debt/"><div class="card-body"> <span class="timeago small" > May 19, 2020 <i class="unloaded">2020-05-19T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tackling Tech Debt</h3><div class="text-muted small"><p> “Technical Debt” can sometimes be a slippery term in the software industry. If you talk about it long enough, it usually becomes apparent that the participants in the conversation have very differe...</p></div></div></a></div><div class="card"> <a href="/posts/thoughts-on-gitkraken/"><div class="card-body"> <span class="timeago small" > Jul 19, 2018 <i class="unloaded">2018-07-19T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Thoughts on GitKraken</h3><div class="text-muted small"><p> So I recently saw the 1.0 release announcement of Axosoft’s GitKraken. Since I’ve recently been having lots of issues with Atlassian’s SourceTree for Windows, and have never particularly cared for ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/techniques-and-advice-for-logging-in-net/" class="btn btn-outline-primary"><p>Techniques and Advice for Logging in .NET</p></a> <a href="/posts/navigating-the-facebook-app-review-process/" class="btn btn-outline-primary"><p>Navigating the Facebook App Review Process</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//dancerscode.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://dancerscode.com/posts/what-to-log-in-net/'; this.page.identifier = '/posts/what-to-log-in-net/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/TheDancersCode">Shawn</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/automation/">Automation</a> <a class="post-tag" href="/tags/testing/">Testing</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/clean-code/">Clean Code</a> <a class="post-tag" href="/tags/dj/">DJ</a> <a class="post-tag" href="/tags/education/">Education</a> <a class="post-tag" href="/tags/logging/">Logging</a> <a class="post-tag" href="/tags/logitech/">Logitech</a> <a class="post-tag" href="/tags/tech-debt/">Tech Debt</a> <a class="post-tag" href="/tags/west-coast-swing/">West Coast Swing</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dancerscode.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49467963-2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-49467963-2'); </script>
